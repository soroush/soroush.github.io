<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[طبقه‌بندی‌هاوب,برنامه‌نویسی | اختاپوس خسته]]></title>
  <link href="https://soroush.github.io/categories/wb-brnmhnwysy/atom.xml" rel="self"/>
  <link href="https://soroush.github.io/"/>
  <updated>2017-09-16T00:30:22+04:30</updated>
  <id>https://soroush.github.io/</id>
  <author>
    <name><![CDATA[سروش]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[چرا طراحی وب را دوست ندارم]]></title>
    <link href="https://soroush.github.io/blog/why-do-I-hate-web-devel/"/>
    <updated>2014-09-17T00:00:00+04:30</updated>
    <id>https://soroush.github.io/blog/why-do-I-hate-web-devel</id>
    <content type="html"><![CDATA[<p>ترجیح میدم برنامه‌نویسی وب انجام بدم تا کار طراحی ظاهر و گرافیک این‌جور چیزها.
دلیل این وضعیت هم دو تا چیز هست:</p>

<p>۱. طراحی وب کار اعصاب‌خوردکن و بی‌حساب و کتابی هست. هیچ قاعده‌مندی برای طرز کار
CSS
یا اسکریپت‌های عجیب و غریب وجود نداره. هر مرورگری هرچی دلش خواست پشتیبانی
می‌کنه و مثلاً شما به‌عنوان طراح وب مجبور هستید هزینهٔ حماقت مهندسین مایکروسافت
رو با زحمت ده برابر بپردازید.</p>

<p>۲. طراحی وب نیازمند دانش گرافیک هست و هیچ منطق خاصی پشتش نیست. شما باید آدم با
سلیقه‌ای باشید و بدونید چی به چی میاد. هچنین باید هزار و یک تا تکنیک حفظ کنید.
هیچ idiom یا الگوریتم خاصی به شما کمکی نخواهد کرد.</p>

<p>به‌طور خاص اگر بخوام غر بزنم، باید بگم که وب خوب نیست، چون بیماره. بیماری‌ش
طراحی بسیار بد پروتکل‌ها و ابزارها هستند. که البته زمان خودشون (برای نیازهای
خودشون خوب بودن بیچاره‌ها) مثلاً همین
HTML
رو در نظر بگیرید. این پروتکل به‌شدت
Stateless
هست. و صرفاً برای این که داینامیک‌ش کنن، اومدن کلی ژانگلولربازی درآوردن از جمله
پیدایش چیزی به‌نام
Flash
و بدتر از اون چیزهای پیچیده‌تر و احمقانه‌تری مثل
Silverlight
و یا حتا
JavaScript و رفقا.</p>

<p>در کنار همهٔ این‌ها متأسفانه وب به شکل عمیقی تو زندگی ما فرو رفته (: بنابراین
مجبور هستیم یا توسعه‌دهندهٔ وب متوسط (به‌زور هم که شده) بشیم (بکنونیم خودمونو)
یا کلاً آف‌تاپیک بمونیم. از اونجایی که دلم نمی‌خواد آف‌تاپیک باشم، پس میرم که
یاد بگیرم که وب‌دولوپر باشم.</p>

<p>از بین این همه زبان و پروتکل و چیزهای عجیب‌غریب، تصمیم گرفتم با Ruby on Rails
شروع کنم و یه چیز کوچولو درست کنم. تا ببینیم بعدها چه شود&hellip;</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[توسعهٔ وب از دید یک گیگتوپوس]]></title>
    <link href="https://soroush.github.io/blog/web-development-like-a-boss/"/>
    <updated>2014-03-25T00:00:00+04:30</updated>
    <id>https://soroush.github.io/blog/web-development-like-a-boss</id>
    <content type="html"><![CDATA[<p>به‌دلایلی مجبور هستم سایت شرکتمون رو خودم طراحی کنم. همیشه از طراحی وب بدم
می‌اومده. و این کار برام چندان آسون نیست. به نظر من روش‌ها و ابزارهایی که اکثر
توسعه‌دهنده‌های وب ایرانی استفاده می‌کنن مشکلاتی داره. سعی کردم این مشکلات رو حل
کنم و در آخر کار به‌جایی رسیدم که از سبک کاری متداول دیگه استفاده نمی‌کنم و روش
خودم رو ابداع کردم :) اما روش متداول چیه؟ خوب معلومه! بدترین کارهای ممکن و تحمیل
بار روی پردازش، زمان و مخصوصاً ترافیک. یک طراح وب معمولاً این‌طوری کار می‌کنه:</p>

<p>۱. هیچ خبری از گیت نیست. مدیریت نسخه‌ها و پیشرفت پروژه دستی انجام میشه.</br>
۲. برای ارسال و دریافت فایل‌ها روی سرور از cpanel یا اینترفیس‌های تحت وب دیگه‌ای
استفاده میشه. (اگر طراح خیلی حرفه‌ای باشه از FileZilla یا چیزهای مشابه :D )</br>
۳. برای مدیریت پایگاه داده (که معمولاً MySQL هست) از رابط‌های پرهزینه مثل
phpMyAdmin
استفاده میشه.</br>
۴. کارایی و سرعت مدنظر گرفته نمیشن. (چون به نظر ایشون قابل چشم‌پوشی هستند.)</p>

<p>سبک کاری توسعه‌دهنده‌های وب دو تا ایراد اساسی داره. اول این که با هر تغییر کوچکی
توی فایل‌هاشون، کل اون فایل رو دوباره آپلود می‌کنن. با این کار پهنای باند زیادی
هدر میره. دوم این که برای قابل فهم بودن کد اون رو توسط IDE به شکل کامل و شکیل
indent
می‌کنن. یعنی هرجایی که لازم باشه، به هر اندازه‌ای که با استفاده از تب یا فاصله
تورفتگی ایجاد می‌کنن، و این کار خوبه ولی هدررفت حجم خیلی زیادی رو داره.</p>

<p>ایدهٔ کلی من برای توسعهٔ وب مشابه کاری هست که با گیت برای پروژه‌های واقعی انجام
میدم:</p>

<p>۱. توسعه بده.</br>
۲. تغییرات رو (دقت کنید! فقط تغییرات رو) بفرست روی سرور.</br></p>

<p>بعد از یک روز کاری تونستم تمام روال‌های مربوطه رو اتوماتیک کنم و براش یه برنامه
نوشتم. این پست در مورد این برنامه و نحوهٔ استفاده از اون هست.</p>

<!-- more -->


<h2>صورت‌مسأله</h2>

<p>ایدهٔ اصلی اینه که برنامه‌ای داشته باشیم که برای یک وبسایت (که داریم طراحی‌ش
می‌کنیم) کارهای زیر رو انجام میده:</br>
۱. یک رپوزیتوری گیت روی سرور و یکی هم توی دایرکتوری محلی ایجاد می‌کنه.</br>
۲. با هر بار تغییر تمام فایل‌ها رو فشرده می‌کنه (الان میگم فشرده‌سازی یعنی چی) و
با استفاده از گیت، تغییرات
ایجاد شده رو می‌فرسته به سرور.</br>
۳. تمام تغییرات مربوط به فشرده‌سازی رو به حالت عادی برمی‌گردونه.</br></p>

<p>برنامه‌ای می‌خوایم که تمام موارد ۱ تا ۳ مذکور در بالا رو برای تمام فایل‌های
سایتمون انجام بده.</p>

<h2>گیت روی FTP</h2>

<p>هدف اینه که از گیت برای مدیریت پروژه استفاده کنیم و خود سایت نهایی (فایل‌های روی
سرور) رو هم رپوزیتوری مقصد درنظر بگیریم. متأسفانه سرویس‌های هاستینگ برنامهٔ گیت
رو نصب نمی‌کنن و به ما هم اجازه نمیدن که برنامه‌ای رو نصب کنیم. و خوشبختانه گیت
می‌تونه روی
FTP
اجرا بشه! یعنی بدون نیاز به وجود برنامهٔ گیت روی سرور مقصد، شما تنها با استفاده
از پروتکل FTP می‌تونید از کل امکانات گیت استفاده کنید. برای این کار باید از
اسکریپت
<a href="https://github.com/git-ftp/git-ftp">git-ftp</a>
استفاده کنید. برای نصب این اسکریپت روی اوبونتو کافیه مراحل زیر رو انجام بدیم:</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>sudo add-apt-repository ppa:resmo/git-ftp
</span><span class='line'>sudo apt-get update
</span><span class='line'>sudo apt-get install git-ftp
</span></code></pre></td></tr></table></div></figure></notextile></div>
باقی مراحل دقیقاً مشابه رپوزیتوری‌های عادی گیت هست. تنها تفاوتی که داره موقع
ارسال تغییرات به سرور، به‌جای push از ftp push استفاده می‌کنیم:
<div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>git init&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;do changes&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;git ftp push &amp;mdash;user username &amp;mdash;passwd secret 123.124.125.126
</span></code></pre></td></tr></table></div></figure></notextile></div>
دستور ftp push سینتکس خیلی ساده‌ای داره. کافیه یوزرنیم و پسورد اکانت FTP رو وارد
کنیم و در آخر آی‌پی مقصد رو بهش بدیم.</p>

<h2>فشرده‌سازی؟</h2>

<p>فشرده‌سازی یعنی چی؟ یعنی این که تمام فاصله‌های اضافی، نوسطرها و توضیحات رو از یک
فایل حذف کنیم. طوری که برای کامپیوترها قابل فهم باشه ولی برای انسان‌ها نه :) با
دو تا عکس تفاوت رو نشون میدم. تصویر اول یک صفحهٔ HTML رو توی کامپیوتر من نشون
میده که توش تعداد زیادی فاصله و خط‌های اضافی وجود داره. این باعث میشه بفهمم چی
به چیه و بتونم کدهایی رو که نوشتم بخونم:
<img class="center" src="/images/posts/web-devel/expanded.png" title="یک صفحهٔ گسترده" >
تصویر دوم سورس همون صفحه رو که از روی سایت اصلی توی کروم باز کردم نشون میده.
همون‌طور که می‌بینید هیچ چیز اضافه‌ای توی کدها وجود نداره و کل صفحه عبارت است از
یک خط طولانی که هیچ جای اون دو تا فاصله وجود نداره:
<img class="center" src="/images/posts/web-devel/compressed.png" title="یک صفحهٔ فشرده شده" >
برای این کار نیاز به روش‌های مختلف فشرده‌سازی برای پروتکل‌ها
و زبان‌های
HTML، JavaScript، CSS و PHP
داریم. خوشبختانه روش‌های فشرده‌سازی برای جاوااسکریپت و سی‌اس‌اس موجود هستند.</p>

<h3>CSS و JS</h3>

<p>برنامه‌های متعددی هم برای این‌ها نوشته شده. من از برنامهٔ
<a href="http://yui.github.io/yuicompressor/">yui-compressor</a>
استفاده می‌کنم؛ چون هم می‌تونه CSS رو فشرده کنه و هم JS. برای نصبش نیازی به PPA
خاصی نداریم. مخزن‌های رسمی اوبونتو پکیج رو دارن:
<div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>sudo apt-get install yui-compressor
</span></code></pre></td></tr></table></div></figure></notextile></div>
حالا اگر بخوایم از این برنامه استفاده کنیم کافیه تمام فایل‌هایی رو که پسوند css
دارن به شکل بازگشتی پیدا کنیم و برنامه رو روی اون‌ها اجرا کنیم:
<div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nb">echo</span> &amp;ldquo;Compressing CSS files&amp;hellip;&amp;rdquo;
</span><span class='line'><span class="k">for </span>css in &lt;code&gt;find . -type f -name <span class="se">\*</span>.css -print&lt;/code&gt;
</span><span class='line'><span class="k">do</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;pre&gt;&lt;code&gt;echo <span class="s2">&quot;Compressing $css&quot;</span>
</span><span class='line'><span class="nv">temp</span><span class="o">=</span><span class="s2">&quot;$css.temp.css&quot;</span>
</span><span class='line'>yui-compressor --charset utf-8 --type css <span class="s2">&quot;$css&quot;</span> -o <span class="s2">&quot;$temp&quot;</span>
</span><span class='line'>mv <span class="nv">$temp</span> <span class="nv">$css</span>
</span><span class='line'>&lt;/code&gt;&lt;/pre&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;done
</span></code></pre></td></tr></table></div></figure></notextile></div>
به این ترتیب تمام فایل‌های css داخل تمام دایرکتوری‌های پروژه‌مون مینیفای میشن.
اما بعد از این که تغییرات رو فرستادیم روی سرور باید همه‌چیز رو به‌حالت اول
برگردونیم. خوشبختانه برای این کار هم اسکریپت‌های خوب نوشته شده که وظیفه‌شون
ایجاد تورفتگی و مرتب کردن کدها هست. کافیه بنویسیم:
<div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="k">for </span>css in &lt;code&gt;find . -type f -name <span class="se">\*</span>.css -print&lt;/code&gt;
</span><span class='line'><span class="k">do</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;pre&gt;&lt;code&gt;temp<span class="o">=</span><span class="s2">&quot;$css.tmp&quot;</span>
</span><span class='line'>cp <span class="nv">$css</span> <span class="nv">$temp</span>
</span><span class='line'>cssunminifier <span class="nv">$temp</span> &amp;gt; <span class="nv">$css</span>
</span><span class='line'>rm <span class="nv">$temp</span>
</span><span class='line'>&lt;/code&gt;&lt;/pre&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;done
</span></code></pre></td></tr></table></div></figure></notextile></div>
و اسکریپت مشابهی هم برای جاوااسکریپت به اسم
<a href="https://github.com/einars/js-beautify">js-beautify</a>
وجود داره. ولی js-beautify یه پکیج دبین نیست، بلکه می‌تونید اون رو به‌شکل یک
کتابخانهٔ پایتون یا جاوااسکریپت نصب کنید. مورد دوم رو انتخاب می‌کنیم:
<div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>npm -g install js-beautify
</span><span class='line'><span class="k">done</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>
و بعد:
<div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="k">for </span>js in &lt;code&gt;find . -type f -name <span class="se">\*</span>.js -print&lt;/code&gt;
</span><span class='line'><span class="k">do</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;pre&gt;&lt;code&gt;js-beautify <span class="nv">$js</span>
</span><span class='line'>&lt;/code&gt;&lt;/pre&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;done
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<h3>HTML و PHP</h3>

<p>متأسفانه روشی برای حداقل کردن حجم کد و حذف اضافات برای HTML و PHP وجود نداره. با
این حال می‌تونیم این کار رو خودمون به شکل دستی انجام بدیم. باید توجه داشته باشیم
که فواصل سفید (تب، فاصله و کاراکترهای مشابه) در زبان‌های HTML و PHP نقش سمنتیکی
ندارند. (از درس کامپایلر به یاد داریم که برای اکثر زبان‌ها مثل سی هم همین وضعیت
هست). یعنی ما می‌تونیم هر ترکیبی از هر تعداد فاصله، تب و نوسطر؛ به هر تعداد رو
به یک فاصله تبدیل کنیم. همچنین توی HTML فواصل بین تگ‌ها (خارج از محتوا) هیچ نقشی
ندارند و می‌تونن به راحتی حذف بشن. مثلاً هیچ فرقی نداره بنویسیم
<code>&lt;p&gt;text&lt;/p&gt;   &lt;/br&gt;</code>
یا اینکه
<code>&lt;p&gt;text&lt;/p&gt;&lt;/br&gt;</code>
پس می‌تونیم با چند تا عبارت منظم مناسب (و البته بک‌آپ گرفتن از فایل فعلی‌مون)
محتوای اضافی رو حذف کنیم. این کار نیاز به دقت زیادی داره چون عبارات منظم مقدس
هستند و با مقدسات نمیشه شوخی کرد. اسکریپت رو ببینید تا توضیحاتش رو بنویسم:
<div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;!/bin/bash&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;mkdir -p ./.backups
</span><span class='line'><span class="nv">temp</span><span class="o">=</span><span class="nv">$1</span><span class="s2">&quot;.temp&quot;</span>
</span><span class='line'><span class="nv">backup</span><span class="o">=</span>&amp;ldquo;./.backups/<span class="nv">$1</span>.backup&amp;rdquo;
</span><span class='line'>cp -r &amp;mdash;parents <span class="nv">$1</span> ./.backups/
</span><span class='line'>sed -i -e :a -e N -e &amp;rsquo;s/<span class="se">\n</span>/ /&amp;lsquo; -e ta <span class="nv">$1</span>
</span><span class='line'>sed -i -r -e &amp;rsquo;s/<span class="o">[</span> <span class="se">\t\n</span><span class="o">]</span>+/ /g&amp;rsquo; <span class="nv">$1</span>
</span><span class='line'>sed -i -r -e &amp;rsquo;s/&gt;<span class="o">[</span> <span class="se">\t</span><span class="o">]</span>+&lt;/&gt;&amp;lt;/g<span class="err">&#39;</span> <span class="nv">$1</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>
همون‌طور که می‌بینید این یک اسکریپت مجزا هست که اسم یک فایل رو از خط فرمان
می‌گیره و فشرده‌ش می‌کنه. توی خط <code>2</code> یک پوشه‌ای برای بکاپ‌ها می‌سازم. قراره
فایل‌های فعلی‌مون رو توی این پوشه کپی کنیم، تا بعد از فشرده‌سازی و ارسال دلتا به
سرور، بتونیم اون‌ها رو بازیابی کنیم. خط <code>5</code> به شکل بازگشتی (با کپی پوشه‌های پدر)
این کار رو برامون انجام میده. از این‌جا کار اصلی‌مون شروع میشه. خط <code>6</code> تمام
نوسطرها (یک یا چند تا پشت سر هم) رو حذف می‌کنه و تبدیل‌شون می‌کنه به یک فاصله.
مثلاً اگر شما ده بار اینتر بزنید، اون خط‌های خالی همه‌شون تبدیل میشن به یک
فاصله. خط <code>7</code> هر ترکیبی از هر تعداد فاصلهٔ سفید رو تبدیل می‌کنه به یک فاصله.
مثلاً
<code>&lt;div&gt; &lt;div&gt;&lt;/div&gt;      &lt;/div&gt;</code>
تبدیل میشه به:
<code>&lt;div&gt; &lt;div&gt;&lt;/div&gt; &lt;/div&gt;</code>.
و خط آخر هم فواصل بین تگ‌ها رو (که جزئی از محتوا حساب نمیشن) حذف می‌کنه.</p>

<h2>جمع‌بندی</h2>

<p>با جمع کردن تمام این حرف و حدیث‌ها کنار هم می‌رسیم به یک اسکریپت جامع و کامل به
که متن کاملش رو می‌تونید از <a href="">این لینک</a> دریافت کنید. طرز کار اسکریپت به این شکل
هست که شما کارتون رو انجام میدید، وقتی تصمیم گرفتید که چیزی رو آپلود کنید، فقط
کافیه تغییراتون رو توی گیت اعمال کنید و بعد اسکریپت رو به این شکل اجرا کنید:
<div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>deploy-web &lt;username&gt; &lt;password&gt; &lt;IP&gt;
</span></code></pre></td></tr></table></div></figure></notextile></div>
بعد همه‌چیز فشرده میشه، همه‌چیز کامیت میشه، تغییرات به سرور FTP ارسال میشه، و در
نهایت همه‌چیز برمی‌گرده به حالت اولیه :) برای حمایت مالی از این پروژه می‌تونی توی
<a href="https://github.com/soroush/web-depoly">صفحهٔ اصلی</a>
استار بزنید و یا کمک‌های مالی خودتون رو به آدرس بیتکوین <code>1NywosV5cNmcGiSqZ4zZNkvWr6G3v6kgS4</code> ارسال کنید.</p>
]]></content>
  </entry>
  
</feed>
